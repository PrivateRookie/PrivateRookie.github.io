<!DOCTYPE HTML>
<html lang="zh" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>boxercrabå‘å¸ƒ - å¤œé›¨ç§‹ç¯å½•</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../å¯¼è¨€.html">å¯¼è¨€</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="../æ–‡ç« .html"><strong aria-hidden="true">1.</strong> æ–‡ç« </a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../posts/2018-06-24-openstackåˆ›å»ºè™šæ‹Ÿæœºæºç é˜…è¯».html"><strong aria-hidden="true">1.1.</strong> openstackåˆ›å»ºè™šæ‹Ÿæœºæºç é˜…è¯»</a></li><li class="chapter-item "><a href="../posts/2018-06-27-Bottle-æ¡†æ¶ä¸­è£…é¥°å™¨ç±»å’Œæè¿°ç¬¦åº”ç”¨.html"><strong aria-hidden="true">1.2.</strong> Bottle-æ¡†æ¶ä¸­è£…é¥°å™¨ç±»å’Œæè¿°ç¬¦åº”ç”¨</a></li><li class="chapter-item "><a href="../posts/2019-04-17-ä½¿ç”¨devpiæ­å»ºæœ¬åœ°æº.html"><strong aria-hidden="true">1.3.</strong> ä½¿ç”¨devpiæ­å»ºæœ¬åœ°æº</a></li><li class="chapter-item "><a href="../posts/2019-04-20-Pythonå±•å¼€åµŒå¥—åºåˆ—.html"><strong aria-hidden="true">1.4.</strong> Pythonå±•å¼€åµŒå¥—åºåˆ—</a></li><li class="chapter-item "><a href="../posts/2019-04-20-pipenv-ä½¿ç”¨ç®€ä»‹.html"><strong aria-hidden="true">1.5.</strong> pipenv-ä½¿ç”¨ç®€ä»‹</a></li><li class="chapter-item "><a href="../posts/2019-04-22-æ·±åº¦ç³»ç»Ÿrustå¼€å‘ç¯å¢ƒæ­å»º.html"><strong aria-hidden="true">1.6.</strong> æ·±åº¦ç³»ç»Ÿrustå¼€å‘ç¯å¢ƒæ­å»º</a></li><li class="chapter-item "><a href="../posts/2019-05-01-miniserve-miniserveç®€å•ç¾è§‚çš„æ–‡ä»¶æœåŠ¡å™¨.html"><strong aria-hidden="true">1.7.</strong> miniserve-miniserveç®€å•ç¾è§‚çš„æ–‡ä»¶æœåŠ¡å™¨</a></li><li class="chapter-item "><a href="../posts/2019-05-05-magnum-stein-release-new-features.html"><strong aria-hidden="true">1.8.</strong> magnum-stein-release-new-features</a></li><li class="chapter-item "><a href="../posts/2019-05-12-rust-rc.html"><strong aria-hidden="true">1.9.</strong> rust-rc</a></li><li class="chapter-item "><a href="../posts/2019-05-20-Python-Rust-è¿­ä»£å™¨ç±»æ¯”.html"><strong aria-hidden="true">1.10.</strong> Python-Rust-è¿­ä»£å™¨ç±»æ¯”</a></li><li class="chapter-item "><a href="../posts/2019-06-28-æ­å»ºetcdæœåŠ¡å‘ç°æœåŠ¡.html"><strong aria-hidden="true">1.11.</strong> æ­å»ºetcdæœåŠ¡å‘ç°æœåŠ¡</a></li><li class="chapter-item "><a href="../posts/2019-07-03-OpenStackå…è®¸rootç”¨æˆ·ä½¿ç”¨ssh-keyç™»å½•.html"><strong aria-hidden="true">1.12.</strong> OpenStackå…è®¸rootç”¨æˆ·ä½¿ç”¨ssh-keyç™»å½•</a></li><li class="chapter-item "><a href="../posts/2019-07-06-requirements.txtæ–‡ä»¶æŒ‡å®šä¾èµ–.html"><strong aria-hidden="true">1.13.</strong> requirements.txtæ–‡ä»¶æŒ‡å®šä¾èµ–</a></li><li class="chapter-item "><a href="../posts/2019-07-10-æˆ‘ç»å¸¸ä½¿ç”¨çš„Rustå°crate.html"><strong aria-hidden="true">1.14.</strong> æˆ‘ç»å¸¸ä½¿ç”¨çš„Rustå°crate</a></li><li class="chapter-item "><a href="../posts/2019-07-14-Rustæ¨¡å—ä¸æ–‡ä»¶.html"><strong aria-hidden="true">1.15.</strong> Rustæ¨¡å—ä¸æ–‡ä»¶</a></li><li class="chapter-item "><a href="../posts/2019-07-18-Deepinå®‰è£…Angular10+.html"><strong aria-hidden="true">1.16.</strong> Deepinå®‰è£…Angular10+</a></li><li class="chapter-item "><a href="../posts/2019-07-25-ä½¿ç”¨OSProfiler.html"><strong aria-hidden="true">1.17.</strong> ä½¿ç”¨OSProfiler</a></li><li class="chapter-item "><a href="../posts/2019-07-27-windowsä¸Šä½¿ç”¨vscode-remote.html"><strong aria-hidden="true">1.18.</strong> windowsä¸Šä½¿ç”¨vscode-remote</a></li><li class="chapter-item "><a href="../posts/2019-08-04-ä½¿ç”¨rust-analyzer.html"><strong aria-hidden="true">1.19.</strong> ä½¿ç”¨rust-analyzer</a></li><li class="chapter-item "><a href="../posts/2019-08-16-Python-packageå®‰è£…æ—¶å®‰è£…é¢å¤–æ–‡ä»¶.html"><strong aria-hidden="true">1.20.</strong> Python-packageå®‰è£…æ—¶å®‰è£…é¢å¤–æ–‡ä»¶</a></li><li class="chapter-item "><a href="../posts/2019-08-31-Rust-å‘½ä»¤è¡Œå·¥å…·.html"><strong aria-hidden="true">1.21.</strong> Rust-å‘½ä»¤è¡Œå·¥å…·</a></li><li class="chapter-item "><a href="../posts/2019-09-27-Fedora-CoreOS-å°é²œ.html"><strong aria-hidden="true">1.22.</strong> Fedora-CoreOS-å°é²œ</a></li><li class="chapter-item "><a href="../posts/2020-01-31-rustä»£ç é£æ ¼tips.html"><strong aria-hidden="true">1.23.</strong> rustä»£ç é£æ ¼tips</a></li><li class="chapter-item "><a href="../posts/2020-02-03-log4rs-Rust-logåº“.html"><strong aria-hidden="true">1.24.</strong> log4rs-Rust-logåº“</a></li><li class="chapter-item "><a href="../posts/2020-02-29-impl-Trait-vs-dyn-Trait.html"><strong aria-hidden="true">1.25.</strong> impl-Trait-vs-dyn-Trait</a></li><li class="chapter-item "><a href="../posts/2020-03-04-nom-cheatsheet.html"><strong aria-hidden="true">1.26.</strong> nom-cheatsheet</a></li><li class="chapter-item "><a href="../posts/2020-03-09-gitlab-runnerå¯åŠ¨å®ˆæŠ¤è¿›ç¨‹.html"><strong aria-hidden="true">1.27.</strong> gitlab-runnerå¯åŠ¨å®ˆæŠ¤è¿›ç¨‹</a></li><li class="chapter-item "><a href="../posts/2020-03-21-ä½¿ç”¨nomå†™parser.html"><strong aria-hidden="true">1.28.</strong> ä½¿ç”¨nomå†™parser</a></li><li class="chapter-item "><a href="../posts/2020-05-10-ä½¿ç”¨nomå†™parser.html"><strong aria-hidden="true">1.29.</strong> ä½¿ç”¨nomå†™parser</a></li><li class="chapter-item "><a href="../posts/2020-06-07-ä½¿ç”¨nomå†™parser.html"><strong aria-hidden="true">1.30.</strong> ä½¿ç”¨nomå†™parser</a></li><li class="chapter-item "><a href="../posts/2020-06-25-Rustå®ç°çš„æ—¥è‡³æ”¶é›†å·¥å…·.html"><strong aria-hidden="true">1.31.</strong> Rustå®ç°çš„æ—¥è‡³æ”¶é›†å·¥å…·</a></li><li class="chapter-item "><a href="../posts/2020-07-19-typing+pyright-æ›´æ­£ç¡®çš„Pythonä»£ç .html"><strong aria-hidden="true">1.32.</strong> typing+pyright-æ›´æ­£ç¡®çš„Pythonä»£ç </a></li><li class="chapter-item expanded "><a href="../posts/2020-07-31-boxercrabå‘å¸ƒ.html" class="active"><strong aria-hidden="true">1.33.</strong> boxercrabå‘å¸ƒ</a></li><li class="chapter-item "><a href="../posts/2020-08-16-ä½¿ç”¨nomå†™parser.html"><strong aria-hidden="true">1.34.</strong> ä½¿ç”¨nomå†™parser</a></li><li class="chapter-item "><a href="../posts/2020-08-30-PowerShellé…ç½®.html"><strong aria-hidden="true">1.35.</strong> PowerShellé…ç½®</a></li><li class="spacer"></li></ol></li><li class="chapter-item "><a href="../ç¬”è®°.html"><strong aria-hidden="true">2.</strong> ç¬”è®°</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../notes/rust/2021-10-31-åµŒå¥—è§£æ„.html"><strong aria-hidden="true">2.1.</strong> åµŒå¥—è§£æ„</a></li><li class="chapter-item "><a href="../notes/rust/2021-11-06-æœªèƒ½ææ—©é‡Šæ”¾çš„RefCell.html"><strong aria-hidden="true">2.2.</strong> æœªæå‰é‡Šæ”¾çš„å¼•ç”¨</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">å¤œé›¨ç§‹ç¯å½•</h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="boxercrab-020-å‘å¸ƒ"><a class="header" href="#boxercrab-020-å‘å¸ƒ">boxercrab 0.2.0 å‘å¸ƒ</a></h1>
<p>boxercrab æ¥è‡ªä½¿ç”¨ Nom å†™è§£æå™¨çš„ä¸€ä¸ªç»ƒä¹ é¡¹ç›®ï¼Œå†™ç€å†™ç€è§‰å¾—é¡¹ç›®æŒºå¥½ç©ï¼Œå°±æƒ³ç€æŠŠé¡¹ç›®åŠŸèƒ½éƒ½å®ç°ï¼Œæ²¡æƒ³åˆ°è¸å…¥äº†ä¸€ä¸ªå¤§å‘ã€‚ç»è¿‡è¿‘2ä¸ªæœˆé›¶é›¶æ•£æ•£çš„å¼€å‘ï¼Œboxercrab ç»ˆäºè¾¾åˆ°äº†å‹‰å¼ºèƒ½ç”¨çš„æ°´å¹³ï¼Œæ‰€ä»¥ boxercrab 0.2.0 æ­£å¼å‘å¸ƒğŸ‰ã€‚</p>
<hr />
<h2 id="é¡¹ç›®ä»‹ç»"><a class="header" href="#é¡¹ç›®ä»‹ç»">é¡¹ç›®ä»‹ç»</a></h2>
<p><a href="https://github.com/PrivateRookie/boxercrab">boxercrab</a> æ˜¯ä¸€ä¸ªåŸºäº Rust nom åº“å®ç°çš„ MySQL binlog æ–‡ä»¶è§£æåº“ï¼Œçº¯ Rust å®ç°ï¼Œæ— éœ€ mysql-server åº“ã€‚</p>
<p>boxercrab å³æ‹³å‡»èŸ¹ï¼Œè¿™ç§èƒèŸ¹ä¼šåœ¨è‡ªå·±çš„é’³å­ä¸Šé™„ç€æµ·èœ‡ï¼Œé€šè¿‡æŒ¥èˆå¸¦é­”æ³•æ”»å‡»çš„é’³å­æœå¯»çŒç‰©ï¼Œå½¢ä¼¼é¡¹ç›®åœ¨ binlog æ‰¾åˆ°è‡ªå·±éœ€è¦å†…å®¹çš„å·¥ä½œæ¨¡å¼ï¼Œè€Œä¸” boxercrab å’Œ Rust çš„å‰ç¥¥ç‰© Ferris éƒ½æ˜¯èƒèŸ¹ï¼Œå¯“æ„ boxercrab æ˜¯åŸºäº Rust å®ç°çš„ã€‚</p>
<p>boxercrab é¡¹ç›®çš„ç›®æ ‡æ˜¯å°½é‡è§£æ binlog äº‹ä»¶çš„æ¯ä¸ªå­—æ®µã€‚æ¯”å¯¹äº <code>write_rows_v2</code> äº‹ä»¶ï¼Œ boxercrab å¯ä»¥ç»™å‡ºè¿™ä¸ªäº‹ä»¶çš„ flags å’Œå†™å…¥çš„æ¯åˆ—æ•°æ®ã€‚</p>
<p>å‡è®¾æœ‰å¦‚ä¸‹ sql</p>
<pre><code class="language-sql">DROP TABLE IF EXISTS `boxercrab`;

CREATE TABLE `boxercrab` (
    `id` INT UNSIGNED AUTO_INCREMENT,
    `title` VARCHAR(40) NOT NULL,
    PRIMARY KEY (`id`)
)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

INSERT INTO `boxercrab` (`title`) VALUES ('abcde');
</code></pre>
<p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è§£æ binglog æ–‡ä»¶</p>
<pre><code class="language-bash">bcrab trans &lt;binlog&gt; output.yaml -f yaml
</code></pre>
<p>boxercrab è§£æçš„ <code>write_rows_v2</code> å¸¦ç€äº‹ä»¶ header å¤´ï¼Œtable_id, ç”šè‡³æ’å…¥çš„æ¯åˆ—æ•°æ®(rows, æ•°æ®å¤§éƒ¨åˆ†ä¸º u8)</p>
<pre><code class="language-yaml">WriteRowsV2:
  header:
    timestamp: 1596179173
    event_type: 30
    server_id: 1
    event_size: 46
    log_pos: 980
    flags:
      in_use: false
      forced_rotate: false
      thread_specific: false
      suppress_use: false
      update_table_map_version: false
      artificial: false
      relay_log: false
      ignorable: false
      no_filter: false
      mts_isolate: false
  table_id: 111
  flags:
    end_of_stmt: true
    foreign_key_checks: true
    unique_key_checks: true
    has_columns: true
  extra_data_len: 2
  extra_data: []
  column_count: 2
  inserted_image_bits:
    - 255
  rows:
    - - Long:
          - 1
          - 0
          - 0
          - 0
      - VarChar:
          - 97
          - 98
          - 99
          - 100
          - 101
  checksum: 81937473
</code></pre>
<p>å½“ç„¶ç”±äºé¡¹ç›®è‰åˆ›ï¼Œæ–‡æ¡£è¿‡æ—¶ï¼Œä¸ç†Ÿæ‚‰C++ç­‰åŸå› ï¼Œè¿˜ä¸èƒ½åšåˆ°è§£ææ‰€æœ‰äº‹ä»¶ï¼Œå·²ç»è§£æçš„äº‹ä»¶
æœ‰äº›è¿˜æ²¡æœ‰ç»è¿‡å……åˆ†çš„æµ‹è¯•ï¼Œç›®å‰è§£æè¿›åº¦ä¸º</p>
<table><thead><tr><th>Hex</th><th>Event Name</th><th>Parsed</th><th>Note</th></tr></thead><tbody>
<tr><td>0x01</td><td>START_EVENT_V3</td><td>N</td><td>too old to support</td></tr>
<tr><td>0x02</td><td>QUERY_EVENT</td><td>Y</td><td></td></tr>
<tr><td>0x03</td><td>STOP_EVENT</td><td>Y</td><td></td></tr>
<tr><td>0x04</td><td>ROTATE_EVENT</td><td>Y</td><td></td></tr>
<tr><td>0x05</td><td>INTVAR_EVENT</td><td>Y</td><td></td></tr>
<tr><td>0x06</td><td>LOAD_EVENT</td><td>Y</td><td>not tested</td></tr>
<tr><td>0x07</td><td>SLAVE_EVENT</td><td>Y</td><td>not tested</td></tr>
<tr><td>0x08</td><td>CREATE_FILE_EVENT</td><td>Y</td><td>not tested</td></tr>
<tr><td>0x09</td><td>APPEND_BLOCK_EVENT</td><td>Y</td><td>not tested</td></tr>
<tr><td>0x0a</td><td>EXEC_LOAD_EVENT</td><td>Y</td><td></td></tr>
<tr><td>0x0b</td><td>DELETE_FILE_EVENT</td><td>Y</td><td>not tested</td></tr>
<tr><td>0x0c</td><td>NEW_LOAD_EVENT</td><td>Y</td><td>not tested</td></tr>
<tr><td>0x0d</td><td>RAND_EVENT</td><td>Y</td><td></td></tr>
<tr><td>0x0e</td><td>USER_VAR_EVENT</td><td>Y</td><td>not fully tested</td></tr>
<tr><td>0x0f</td><td>FORMAT_DESCRIPTION_EVENT</td><td>Y</td><td></td></tr>
<tr><td>0x10</td><td>XID_EVENT</td><td>Y</td><td></td></tr>
<tr><td>0x11</td><td>BEGIN_LOAD_QUERY_EVENT</td><td>Y</td><td></td></tr>
<tr><td>0x12</td><td>EXECUTE_LOAD_QUERY_EVENT</td><td>Y</td><td></td></tr>
<tr><td>0x13</td><td>TABLE_MAP_EVENT</td><td>Y</td><td>not fully tested</td></tr>
<tr><td>0x14</td><td>WRITE_ROWS_EVENTv0</td><td>N</td><td></td></tr>
<tr><td>0x15</td><td>UPDATE_ROWS_EVENTv0</td><td>N</td><td></td></tr>
<tr><td>0x16</td><td>DELETE_ROWS_EVENTv0</td><td>N</td><td></td></tr>
<tr><td>0x17</td><td>WRITE_ROWS_EVENTv1</td><td>N</td><td></td></tr>
<tr><td>0x18</td><td>UPDATE_ROWS_EVENTv1</td><td>N</td><td></td></tr>
<tr><td>0x19</td><td>DELETE_ROWS_EVENTv1</td><td>N</td><td></td></tr>
<tr><td>0x1a</td><td>INCIDENT_EVENT</td><td>Y</td><td>not tested</td></tr>
<tr><td>0x1b</td><td>HEARTBEAT_EVENT</td><td>Y</td><td>not tested</td></tr>
<tr><td>0x1c</td><td>IGNORABLE_EVENT</td><td>N</td><td></td></tr>
<tr><td>0x1d</td><td>ROWS_QUERY_EVENT</td><td>Y</td><td></td></tr>
<tr><td>0x1e</td><td>WRITE_ROWS_EVENTv2</td><td>Y</td><td>not fully tested</td></tr>
<tr><td>0x1f</td><td>UPDATE_ROWS_EVENTv2</td><td>Y</td><td>not fully tested</td></tr>
<tr><td>0x20</td><td>DELETE_ROWS_EVENTv2</td><td>Y</td><td>not fully tested</td></tr>
<tr><td>0x21</td><td>GTID_EVENT</td><td>Y</td><td></td></tr>
<tr><td>0x22</td><td>ANONYMOUS_GTID_EVENT</td><td>Y</td><td></td></tr>
<tr><td>0x23</td><td>PREVIOUS_GTIDS_EVENT</td><td>Y</td><td></td></tr>
</tbody></table>
<p>æµ‹è¯•æ•°æ®åº“ç‰ˆæœ¬ä¸º mysql 5.7.30</p>
<p>ä½¿ç”¨æ–¹å¼å¯ä»¥å‚è€ƒé¡¹ç›® <a href="https://privaterookie.github.io/boxercrab/">README</a></p>
<h2 id="é¡¹ç›®æ„Ÿå—"><a class="header" href="#é¡¹ç›®æ„Ÿå—">é¡¹ç›®æ„Ÿå—</a></h2>
<p>é¦–å…ˆæˆ‘ä¸å¾—ä¸åæ§½ mysql çš„ binlog æ–‡æ¡£ï¼Œæœ‰ä¸å°‘éƒ¨åˆ†ä¸å®é™…å†…å®¹ä¸ç¬¦ï¼Œå¯¼è‡´æˆ‘ä¸å¾—ä¸èŠ±å¤§é‡äº‹ä»¶æŸ¥çœ‹ mysqlbinlog hexdump å‡ºæ¥çš„æ–‡ä»¶å°è¯•å°†ä¸€ä¸ªä¸ª u8 ä¸å­—æ®µå¯¹åº”èµ·æ¥ï¼Œ
æˆ–è€…ä¸å¾—ä¸ç¿»çœ‹ mysql-server æºç ã€‚ç”šè‡³è¿˜æœ‰åœ¨æ–‡æ¡£ä¸­æ³¨æ˜ä¸ä¼šå‡ºç°åœ¨ binlog ä¸­çš„ NewDate, NewDatetime ç­‰æ•°æ®ç±»å‹ååå‡ºç°åœ¨ binlog æ–‡ä»¶ä¸­ï¼Œæ–‡æ¡£ä¸è¯¦ï¼Œä»£ç çœ‹ä¸æ‡‚ã€‚
æˆ‘ç”šè‡³ä¸€åº¦æ€€ç–‘è¿™äº›ä»£ç ç¼–è¯‘å‡ºæ¥çš„ mysql å’Œ mysqlbinlog åˆ°åº•èƒ½ä¸èƒ½å·¥ä½œï¼ŒOracle æ˜¯ä¸æ˜¯å‘çš„å‡ä»£ç ã€‚</p>
<p>ä½†å¥½åœ¨æœ‰ä¸å°‘å…¶ä»–è¯­è¨€å®ç°çš„ç±»ä¼¼é¡¹ç›®ï¼Œèƒ½æä¾›å€Ÿé‰´ï¼ŒåŒæ—¶ mysql slack é¢‘é“çš„ Swany è€å“¥ä¹Ÿéå¸¸æ´»è·ƒï¼ŒçŸ¥é“æˆ‘ä¸ç†Ÿæ‚‰ C++ è¿˜å¸®æˆ‘ç¿»é˜…äº†æºç æ‰¾åˆ°å¯¹åº”çš„å®ç°ã€‚</p>
<p>å›åˆ°é¡¹ç›®æœ¬èº«ï¼Œæˆ‘è§‰å¾—ä½¿ç”¨ Rust çš„ nom è§£æäºŒè¿›åˆ¶æ–‡ä»¶æ¯”è§£ææ–‡æœ¬æ–‡ä»¶è¦ç®€å•ï¼Œå› ä¸ºæ¨¡å¼ä¸ä¼šå¤ªå¤æ‚ï¼Œnom æä¾› <code>le_u8</code>, <code>map</code> å’Œ <code>tag</code> å·¥å…·åŸºæœ¬éƒ½è§£å†³ã€‚å¦‚æœä½ ç†Ÿæ‚‰æŸä¸ªåè®®ï¼Œå®ç° parser èŠ±è´¹ä¸äº†å¤šå°‘æ—¶é—´ã€‚ä»¥æˆ‘ç”¨ nom å†™ json, redis åè®® parser å’Œ binlog parser çš„ç»éªŒçœ‹ï¼Œ <strong>nom æ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„åº“ï¼Œå€¼å¾—ä¸€è¯•ï¼</strong></p>
<p>æ•´ä¸ªé¡¹ç›®éƒ½æ˜¯åœ¨ vscode + rust-analyzer ç¯å¢ƒä¸­å†™å‡ºæ¥çš„ï¼Œç»è¿‡å¤§åŠå¹´æ¯å‘¨ä¸€ç‰ˆçš„ç¨³å®šæ›´æ–°ï¼Œrust-analyzer å·²ç»æŠŠ rls è¿œè¿œç”©åœ¨èº«åã€‚
rust-analyzer æä¾› IDEäº† ä¸€èˆ¬çš„ä½¿ç”¨æ„Ÿå—ã€‚æˆ‘ç»å¸¸ä½¿ç”¨ F2 é‡å‘½ååŠŸèƒ½ï¼ŒæŠŠä¸æ»¡æ„çš„å˜é‡ã€å‚æ•°ã€æˆ–è€…ç»“æ„ä½“é‡å‘½åï¼Œrust-analyzer é€šè¿‡è¯­ä¹‰åˆ†æï¼Œå¯ä»¥ä¿è¯ä¸€æ¬¡ä¿®æ”¹ï¼Œä¸å‡ºé”™ï¼Œä¸é—æ¼ã€‚
å¯¹äºè¾…åŠ©è¡¥å…¨ï¼Œrust-analyzer å¯¹æ ‡å‡†åº“å’Œç¬¬ä¸‰æ–¹åº“çš„æ”¯æŒéƒ½éå¸¸å¥½ï¼Œé€Ÿåº¦ä¹Ÿå¾ˆå¿«ï¼Œä¸ä¹…å‰çš„æ›´æ–°è®© rust-analyzer åœ¨ <code>Cargo.toml</code> ä¾èµ–å˜æ›´æ—¶è‡ªåŠ¨é‡è½½ï¼Œæ–°åŠ å…¥çš„ä¾èµ–ä¸éœ€è¦é‡æ–°æ‰“å¼€é¡¹ç›®å³å¯æ‹¥æœ‰è¾…åŠ©è¡¥å…¨ã€‚
æœ€åæ˜¯ä¸å¤šä¸è¯´çš„ <code>#[test]</code> æµ‹è¯•å‡½æ•°ä¸Šæ˜¾ç¤º Debug å‘½ä»¤ï¼Œä½ å¯ä»¥é€šè¿‡é¼ æ ‡ç›´æ¥ç‚¹å‡»è¿›å…¥ Debug è€Œä¸ç”¨é…ç½®å¤æ‚çš„ <code>launch.json</code> æ–‡ä»¶ï¼Œè¿™é¡¹åŠŸèƒ½åœ¨æœ‰å¾ˆå¤šæµ‹è¯•ç”¨ä¾‹ï¼Œåˆéœ€è¦ debug æ—¶éå¸¸æœ‰ç”¨ã€‚</p>
<p>æ•ˆæœå¦‚ä¸‹</p>
<p><img src="./../assets/2020_07_30/debug.png" alt="debug" /></p>
<p>å¿˜äº† rls å§ï¼Œrust-analyzer æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</p>
<h2 id="é¡¹ç›®æœŸæœ›"><a class="header" href="#é¡¹ç›®æœŸæœ›">é¡¹ç›®æœŸæœ›</a></h2>
<p>boxercrab è¯¦ç»†è§£ææ¯ä¸ªäº‹ä»¶çš„æœ€åˆç›®æ ‡å·²å®ç°äº†å¤§åŠï¼Œå‰©ä¸‹çš„æ˜¯è¾ƒå°‘ç¢°åˆ°çš„äº‹ä»¶ï¼Œæˆ–è€…æ˜¯åªåœ¨è€æ—§ç‰ˆæœ¬å‡ºç°çš„äº‹ä»¶ï¼Œä»è¿™ä¸ªè§’åº¦çœ‹ boxercrab å·²ç»æˆåŠŸäº†ã€‚</p>
<p>åŒæ—¶å› æ—¶é—´ç²¾åŠ›æœ‰é™ï¼Œæ²¡èƒ½è¿›è¡Œè¯¦ç»†çš„æµ‹è¯•ï¼Œè¿™éƒ¨åˆ†ä¼šæ…¢æ…¢è¡¥ä¸Šæ¥ï¼Œå¦‚æœå„ä½èƒ½æä¾›æµ‹è¯• binlog æ–‡ä»¶å’Œå¯¹åº” SQL è¡¥å…¨æµ‹è¯•ç”¨ä¾‹ï¼Œé‚£æ˜¯å†å¥½ä¸è¿‡äº†ã€‚</p>
<p>boxercrab ç›®å‰æœ€å¤§çš„é—®é¢˜ä¹‹ä¸€æ˜¯å®ƒä¼šä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰å†…å®¹ï¼Œå¦‚æœ binlog æ–‡ä»¶éå¸¸å¤§ï¼Œè¿™ä¼šæ¶ˆè€—å¾ˆå¤šå†…å­˜ï¼Œç†æƒ³æƒ…å†µåº”è¯¥æ˜¯æµå¼è§£æï¼Œè¿™ä¹Ÿä¸º boxercrab ç›´æ¥è¿æ¥ mysql-server æŒç»­ç›‘å¬ binlogï¼Œå¯¹æ•°æ®æºè¿›è¡Œè¿‡æ»¤ï¼Œå¤„ç†ï¼Œç›‘æ§æä¾›äº†å¯èƒ½ã€‚è¿™å¯èƒ½æ˜¯ boxercrab æœ€å®ç”¨çš„åŠŸèƒ½äº†ã€‚</p>
<p>å¦‚æœä½ å¯¹ boxercrab æœ‰ä»€ä¹ˆæ„è§æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨ github ä¸Šæ issue, ç‚¹ä¸ªèµå½“ç„¶æ˜¯éå¸¸æ¬¢è¿çš„ï¼ŒğŸ¦€ğŸ¦€ï¼</p>
<p>é¡¹ç›®ä¸»é¡µ: <a href="https://github.com/PrivateRookie/boxercrab">PrivateRookie - boxercrab</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../posts/2020-07-19-typing+pyright-æ›´æ­£ç¡®çš„Pythonä»£ç .html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../posts/2020-08-16-ä½¿ç”¨nomå†™parser.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../posts/2020-07-19-typing+pyright-æ›´æ­£ç¡®çš„Pythonä»£ç .html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../posts/2020-08-16-ä½¿ç”¨nomå†™parser.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        
        <!-- Google Analytics Tag -->
        <script type="text/javascript">
            var localAddrs = ["localhost", "127.0.0.1", ""];

            // make sure we don't activate google analytics if the developer is
            // inspecting the book locally...
            if (localAddrs.indexOf(document.location.hostname) === -1) {
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-138690523-1', 'auto');
                ga('send', 'pageview');
            }
        </script>
        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../lunr.zh.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
